<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        margin: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: black;
        overflow: hidden;
        color: white;
        font-family: Arial, sans-serif;
      }

      canvas {
        border: 1px solid white;
      }

      #score {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 20px;
      }
    </style>
    <title>Pong Game</title>
  </head>
  <body>
    <canvas id="pongCanvas" width="800" height="400"></canvas>
    <div id="score">Score: 0</div>

    <script>
      // Get the canvas and context
      const canvas = document.getElementById("pongCanvas");
      const context = canvas.getContext("2d");

      // Create the paddles, ball, and score
      const paddleWidth = 10,
        paddleHeight = 60;
      let leftPaddle = {
        x: 10,
        y: canvas.height / 2 - paddleHeight / 2,
        dy: 0,
      };
      let rightPaddle = {
        x: canvas.width - paddleWidth - 10,
        y: canvas.height / 2 - paddleHeight / 2,
        dy: 0,
      };
      const ball = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        dx: 5,
        dy: 5,
        size: 10,
      };
      let score = 0;

      // Draw a rectangle
      function drawPaddle(x, y, width, height) {
        context.fillStyle = "white";
        context.fillRect(x, y, width, height);
      }

      // Draw the ball
      function drawBall(x, y, size) {
        context.beginPath();
        context.arc(x, y, size, 0, Math.PI * 2);
        context.fillStyle = "white";
        context.fill();
        context.closePath();
      }

      // Draw the game
      function draw() {
        // Clear the canvas
        context.clearRect(0, 0, canvas.width, canvas.height);

        // Draw paddles and ball
        drawPaddle(leftPaddle.x, leftPaddle.y, paddleWidth, paddleHeight);
        drawPaddle(rightPaddle.x, rightPaddle.y, paddleWidth, paddleHeight);
        drawBall(ball.x, ball.y, ball.size);

        // Draw the score
        context.fillText("Score: " + score, 10, 20);

        // Update ball position
        ball.x += ball.dx;
        ball.y += ball.dy;

        // Bounce off the top and bottom edges
        if (ball.y + ball.size > canvas.height || ball.y - ball.size < 0) {
          ball.dy = -ball.dy;
        }

        // Bounce off left paddle
        if (
          ball.x - ball.size < leftPaddle.x + paddleWidth &&
          ball.y > leftPaddle.y &&
          ball.y < leftPaddle.y + paddleHeight
        ) {
          ball.dx = -ball.dx;
        }

        // Bounce off right paddle
        if (
          ball.x + ball.size > rightPaddle.x &&
          ball.y > rightPaddle.y &&
          ball.y < rightPaddle.y + paddleHeight
        ) {
          ball.dx = -ball.dx;
        }

        // Move paddles
        leftPaddle.y += leftPaddle.dy;
        rightPaddle.y += rightPaddle.dy;

        // Keep paddles within the canvas
        if (leftPaddle.y < 0) leftPaddle.y = 0;
        if (leftPaddle.y + paddleHeight > canvas.height)
          leftPaddle.y = canvas.height - paddleHeight;
        if (rightPaddle.y < 0) rightPaddle.y = 0;
        if (rightPaddle.y + paddleHeight > canvas.height)
          rightPaddle.y = canvas.height - paddleHeight;

        // Move right paddle towards the ball
        if (ball.y < rightPaddle.y + paddleHeight / 2) {
          rightPaddle.dy = -3;
        } else {
          rightPaddle.dy = 3;
        }

        // Score points and restart the game if the ball goes beyond paddles
        if (ball.x + ball.size > canvas.width) {
          score++;
          resetGame();
        } else if (ball.x - ball.size < 0) {
          alert("Game Over! Your Score: " + score);
          document.location.reload();
          return;
        }

        // Repeat the draw function
        requestAnimationFrame(draw);
      }

      // Reset the game
      function resetGame() {
        ball.x = canvas.width / 2;
        ball.y = canvas.height / 2;
        score++;
      }

      // Listen for keyboard events
      document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowUp") rightPaddle.dy = -5;
        if (event.key === "ArrowDown") rightPaddle.dy = 5;
        if (event.key === "w") leftPaddle.dy = -5;
        if (event.key === "s") leftPaddle.dy = 5;
      });

      document.addEventListener("keyup", (event) => {
        if (event.key === "ArrowUp" || event.key === "ArrowDown")
          rightPaddle.dy = 0;
        if (event.key === "w" || event.key === "s") leftPaddle.dy = 0;
      });

      // Start the game loop
      draw();
    </script>
  </body>
</html>
